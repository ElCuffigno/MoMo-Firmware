#!/usr/bin/env python

import sys
import os.path
import os
import intelhex

sys.path.append(os.path.join(os.path.dirname(__file__), '..'))

from pymomo.utilities.template import RecursiveTemplate
from pymomo.utilities.paths import MomoPaths
import cmdln
from colorama import Fore, Style

class ModTool(cmdln.Cmdln):
	name = 'modtool'

	def do_mib12(self, subcmd, opts, name):
		"""${cmd_name}: Create an empty mib12 application module project

		Create a mib12 application module with the given name.  It will
		apeaar in the momo_modules directory with starter files and a
		default empty endpoint file

		name should have no spaces in it.
		
		${cmd_usage}
		${cmd_option_list}
		"""

		fillvars = {
		'module' : {
			'name': name
		}}

		template = RecursiveTemplate('mib12_module', rename=name)
		template.add(fillvars)
		template.render(output_dir=MomoPaths().modules)

		path = os.path.join(MomoPaths().modules, name)
		print "Created mib12 module named %s at:\n%s" % (name, path)

if __name__ == "__main__":
	modtool = ModTool()
	sys.exit(modtool.main())